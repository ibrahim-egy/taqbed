<%- include('partials/header') %>

  <div class="centered-owner">
    <div class="container">
      <a href="/data" class="back-btn"><button class="btn btn-secondary"><i class="fa-solid fa-delete-left"></i> BACK</button></a>

      <% owners.forEach((owner, index)=> { %>
        <div class="owner-table">
          <table class="table table-striped">
            <tbody>
              <tr>
                <th scope="row">Name: </th>
                <td>
                  <%=owner.name%>
                </td>
              </tr>
              <tr>
                <th scope="row">National ID: </th>
                <td>
                  <%=owner.nationalId%>
                </td>
              </tr>
              <tr>
                <th scope="row">Next Payment Date: </th>
                <td>
                  <%=owner.nextPayment%>
                </td>
              </tr>
              <tr>
                <th scope="row">Category: </th>
                <td>
                  <%=owner.category%>
                </td>
              </tr>
              <tr>
                <th scope="row">Amount: Year/Month: </th>
                <td>
                  <%=owner.amount%>/<%=owner.amountPerMonth%>
                </td>
              </tr>
              <!-- <tr>
                <th scope="row">Amount/Month: </th>
                <td>
                  
                </td>
              </tr> -->
              <tr>
                <th scope="row">By Who: </th>
                <td>
                  <%=owner.byWho%>
                </td>
              </tr>
              <tr>
                <th scope="row">Notes: </th>
                <td class="note-cell">
                  <%=owner.note%>
                  <form action="/addNote" method="post" class="note-form">
                    <button class="btn" type="submit" id="noteBtn">+</button>
                    <input type="hidden" name="id" value="<%=owner.id%>">
                    <input type="hidden" name="note" id="owner-note-input">
                  </form>
                </td>
              </tr>
              <tr>
                <th scope="row">Last Payment Date: </th>
                <td>
                  <%=owner.lastPayment%>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="bottom">
            <form action="/edit/<%=owner.id%>" class="side">
              <button class="btn btn-light btn-lg" type="submit"><i class="fa-solid fa-pen-to-square"></i>Edit</button>
            </form>
            <form action="/owner" method="post" class="side">

              <button class="btn btn-success btn-lg" type="submit"><i
                  class="fa-solid fa-thumbs-up" ></i>قبَّض</button>

              <button name="monthCount" id="index<%=index%>" class="btn btn-warning btn-lg" type="submit" onclick='getKbd("<%=index%>")' ><i
                  class="fa-solid fa-thumbs-up"></i>قبَّض بالشهر</button>

              <input type="hidden" name="nextPayment" value="<%=owner.nextPayment%>">
              <input type="hidden" name="amount" value="<%=owner.amount%>">
              <input type="hidden" name="amountPerMonth" value="<%=owner.amountPerMonth%>">
              <input type="hidden" name="ownerId" value="<%=owner.id%>">
            </form>
            <form action="/delete/<%=owner.id%>" method="post" class="side">
              <button id="<%=owner.id%>" class="btn btn-danger btn-lg" name="why" type="submit"
                onclick='getWhy("<%=owner.id%>")'><i class="fa-solid fa-thumbs-down"></i>احزف</button>
            </form>
          </div>
          <hr class="split">
        </div>
        <% }) %>

    </div>
  </div>

<script>
  const noteBtn = document.getElementById("noteBtn");
  const note = document.getElementById("owner-note-input");
  noteBtn.addEventListener("click", () => {
    const noteInput = prompt("Note: ");
    note.value = noteInput;
  });
</script>

  <%- include('partials/footer') %>